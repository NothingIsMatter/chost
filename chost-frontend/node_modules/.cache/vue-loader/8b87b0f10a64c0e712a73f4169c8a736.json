{"remainingRequest":"/home/alexander/chost-project/chost-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alexander/chost-project/chost-frontend/src/components/FileLoadingPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alexander/chost-project/chost-frontend/src/components/FileLoadingPage.vue","mtime":1580559203798},{"path":"/home/alexander/chost-project/chost-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alexander/chost-project/chost-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/alexander/chost-project/chost-frontend/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/alexander/chost-project/chost-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alexander/chost-project/chost-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi8KaW1wb3J0IHtldmVudEJ1c30gZnJvbSAiLi4vbWFpbiI7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiRmlsZUxvYWRpbmdQYWdlIiwKICAgIGRhdGEgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICBuYW1lOicnLAogICAgICAgICAgICBkZXNjcmlwdGlvbjonJywKICAgICAgICAgICAgbmFtZVJ1bGVzOlsKICAgICAgICAgICAgICAgICh2KSA9PiAhIXYgfHwgJ0xvZ2luIGlzIHJlcXVpcmVkJywKICAgICAgICAgICAgXSwKICAgICAgICAgICAgZmlsZXM6bnVsbCwKICAgICAgICAgICAgaW1nOiBudWxsLAogICAgICAgICAgICB1cmw6IG51bGwsCiAgICAgICAgICAgIHZhbGlkOmZhbHNlLAogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgICBjaGFuZ2U6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgdGhpcy51cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHRoaXMuaW1nKQoKICAgICAgICB9LAogICAgICAgIG9uRmlsZUNoYW5nZTpmdW5jdGlvbihlKXsKICAgICAgICAgICAgY29uc3QgdXJsID0gZS50YXJnZXQuZmlsZXNbMF0KICAgICAgICAgICAgdGhpcy51cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHVybCkKICAgICAgICAgICAgYWxlcnQodGhpcy51cmwpCiAgICAgICAgfSwKICAgICAgICAgICAgc2V0SW1nOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBhbGVydCh0aGlzLmltZykKICAgICAgICB9LAogICAgICAgIGNsZWFySW1nOmZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy51cmwgPSBudWxsCiAgICAgICAgfSwKICAgICAgICBzZW5kRm9ybTpmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpCgogICAgICAgICAgICBpZih0aGlzLmZpbGVzKXsKICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgidGl0bGUiLCB0aGlzLmltZykKICAgICAgICAgICAgICAgIGZvciAobGV0IGZpbGUgb2YgdGhpcy5maWxlcykgewogICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiZmlsZXMiLCBmaWxlLCBmaWxlLm5hbWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJuYW1lIix0aGlzLm5hbWUpCiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImRlc2MiLHRoaXMuZGVzY3JpcHRpb24pCiAgICAgICAgICAgICAgICB0aGlzLiRodHRwLnBvc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6OTAwMC9maWxlL3VwbG9hZCcsZm9ybURhdGEsCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcrbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oIHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3VjY2VzcyEnKQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHtyZXNwb25zZX0pCiAgICAgICAgICAgICAgICB9LCBlcnI9PnsKICAgICAgICAgICAgICAgICAgICAgICAgZXJyLAogICAgICAgICAgICAgICAgICAgICAgZXJyLmpzb24oKS50aGVuKG1zZyA9PiAoZXZlbnRCdXMuJGVtaXQoJ2xvdXQnLG1zZy5lcnJvcikpKQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOicvYXV0aCd9KQoKCiAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3RoZXJlIGFyZSBubyBmaWxlcy4nKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["FileLoadingPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FileLoadingPage.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <v-app id=\"inspire\">\n        <v-img src=\"https://i.picsum.photos/id/715/1920/900.jpg\">\n            <v-content>\n                <v-container\n                        class=\"fill-height\"\n                        fluid\n                >\n                    <v-row\n                            align=\"center\"\n                            justify=\"center\"\n                    >\n                        <v-col\n                                cols=\"6\"\n                                sm=\"8\"\n                                md=\"4\"\n                        >\n                            <v-card class=\"elevation-12\">\n                                <v-toolbar\n                                        color=\"primary\"\n                                >\n                                    <v-toolbar-title>Uploading a file</v-toolbar-title>\n                                </v-toolbar>\n                                <v-card-text>\n\n                                    <v-alert v-if=\"errorMsg\" type=\"error\">\n                                        {{ errorMsg}}\n                                    </v-alert>\n                                    <v-form v-model=\"valid\">\n                                        <v-text-field\n                                                :rules=\"nameRules\"\n                                                label=\"Name\"\n                                                name=\"login\"\n                                                prepend-icon=\"person\"\n                                                type=\"text\"\n                                                v-model=\"name\"\n                                        />\n                                      <v-textarea label=\"Description\" dense v-model=\"description\"></v-textarea>\n                                        <v-file-input  label=\"Choose files\" v-model=\"img\" @change=\"change\" @click:clear=\"clearImg\"></v-file-input>\n                                        <span>Preview:</span>\n                                        <v-img v-if=\"url\" :src=\"url\" height=\"300\" width=\"1000\" />\n                                        <v-spacer></v-spacer>\n                                        <v-file-input\n                                                v-model=\"files\"\n                                                color=\"deep-purple accent-4\"\n                                                counter\n                                                label=\"File input\"\n                                                multiple\n                                                placeholder=\"Select your files\"\n                                                prepend-icon=\"mdi-paperclip\"\n                                                outlined\n                                                :show-size=\"1000\"\n                                        >\n                                            <template v-slot:selection=\"{ index, text }\">\n                                                <v-chip\n                                                        v-if=\"index < 2\"\n                                                        color=\"deep-purple accent-4\"\n                                                        dark\n                                                        label\n                                                        small\n                                                >\n                                                    {{ text }}\n                                                </v-chip>\n\n                                                <span\n                                                        v-else-if=\"index === 2\"\n                                                        class=\"overline grey--text text--darken-3 mx-2\"\n                                                >\n        +{{ files.length - 2 }} File(s)\n      </span>\n                                            </template>\n                                        </v-file-input>\n                                    </v-form>\n\n                                </v-card-text>\n                                <v-card-actions>\n\n                                    <v-btn color=\"primary\" @click=\"sendForm\" :disabled=\"!valid\">Upload</v-btn>\n\n                                </v-card-actions>\n                            </v-card>\n                        </v-col>\n                    </v-row>\n                </v-container>\n            </v-content>\n        </v-img>\n    </v-app>\n</template>\n\n<script>\n    /* eslint-disable no-console */\n    import {eventBus} from \"../main\";\n\n    export default {\n        name: \"FileLoadingPage\",\n        data : function () {\n            return{\n                name:'',\n                description:'',\n                nameRules:[\n                    (v) => !!v || 'Login is required',\n                ],\n                files:null,\n                img: null,\n                url: null,\n                valid:false,\n            }\n        },\n        methods:{\n            change:function(){\n                this.url = URL.createObjectURL(this.img)\n\n            },\n            onFileChange:function(e){\n                const url = e.target.files[0]\n                this.url = URL.createObjectURL(url)\n                alert(this.url)\n            },\n                setImg: function () {\n                    alert(this.img)\n            },\n            clearImg:function () {\n                this.url = null\n            },\n            sendForm:function () {\n                let formData = new FormData()\n\n                if(this.files){\n                    formData.append(\"title\", this.img)\n                    for (let file of this.files) {\n                        formData.append(\"files\", file, file.name);\n                    }\n                    formData.append(\"name\",this.name)\n                    formData.append(\"desc\",this.description)\n                    this.$http.post('http://localhost:9000/file/upload',formData,\n                        {\n                            headers: {\n                                'Content-Type': 'multipart/form-data',\n                                'Authorization': 'Bearer '+localStorage.getItem('token')\n                            }\n                        }).then( response => {\n                        console.log('Success!')\n                        console.log({response})\n                    }, err=>{\n                            err,\n                          err.json().then(msg => (eventBus.$emit('lout',msg.error)))\n                        this.$router.push({path:'/auth'})\n\n\n                    }).catch(error => {\n                        console.log(error)\n                    })\n                }\n                else {\n                    console.log('there are no files.')\n                }\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"]}]}