{"remainingRequest":"/home/alexander/chost-project/chost-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alexander/chost-project/chost-frontend/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alexander/chost-project/chost-frontend/src/App.vue","mtime":1580559203790},{"path":"/home/alexander/chost-project/chost-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alexander/chost-project/chost-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/alexander/chost-project/chost-frontend/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/alexander/chost-project/chost-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alexander/chost-project/chost-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQge2V2ZW50QnVzfSBmcm9tICIuL21haW4iOwoKZXhwb3J0IGRlZmF1bHQgewoKICBuYW1lOiAnQXBwJywKICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICB0b2tlbjogJycsCiAgICAgIGF1dGg6IGZhbHNlLAogICAgICB1c2VyOiB7fQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgbG9nb3V0OiBmdW5jdGlvbiAoKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ0b2tlbiIpCiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ1c2VyIikKICAgICAgdGhpcy51c2VyID0ge307CiAgICAgIHRoaXMuYXV0aCA9IGZhbHNlOwoKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9hdXRoIikKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHsKICAgIGV2ZW50QnVzLiRvbignbG91dCcsKCk9PnsKICAgICAgdGhpcy5sb2dvdXQoKQogICAgfSk7CiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykhPW51bGwpIHsKICAgICAgdGhpcy4kaHR0cC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6OTAwMC91c2VyL21lJywgewogICAgICAgIHBhcmFtczoge30sCiAgICAgICAgaGVhZGVyczogeydBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICtsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKX0KICAgICAgfSkudGhlbihyZXNwID0+IChyZXNwLmpzb24oKS50aGVuKHJlcSA9PiAodGhpcy51c2VyID0gcmVxLCB0aGlzLmF1dGggPSB0cnVlLCBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcicsIEpTT04uc3RyaW5naWZ5KHJlcSkpKSkpLAogICAgICByZXNwID0+IChyZXNwLmpzb24oKS50aGVuKHJlcSA9PiAoZXZlbnRCdXMuJGVtaXQoJ2xvdXQnLHJlcS5lcnJvcikpKSkpCiAgICB9CgogIH0KCn07Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <v-app>\n  <v-toolbar dense color=\"deep-orange lighten-3\"  >\n    <v-toolbar-title><v-btn text to=\"/\"> <v-icon>face</v-icon> Chost</v-btn></v-toolbar-title>\n    <v-spacer></v-spacer>\n      <v-btn  v-if=\"auth\" to=\"/home\" color=\"primary\">{{ user.login }}</v-btn>\n      <v-btn  v-if=\"auth\" @click=\"logout\" color=\"error\">Logout</v-btn>\n      <v-btn  v-else to=\"/auth\" prepend-icon=\"contact_mail\" color=\"primary\">Auth</v-btn>\n  </v-toolbar>\n    <v-content>\n    <router-view></router-view>\n    </v-content>\n  </v-app>\n</template>\n\n<script>\n\nimport {eventBus} from \"./main\";\n\nexport default {\n\n  name: 'App',\n  data: function () {\n    return {\n      token: '',\n      auth: false,\n      user: {}\n    }\n  },\n  methods: {\n    logout: function () {\n      localStorage.removeItem(\"token\")\n      localStorage.removeItem(\"user\")\n      this.user = {};\n      this.auth = false;\n\n      this.$router.push(\"/auth\")\n    }\n  },\n  mounted: function () {\n    eventBus.$on('lout',()=>{\n      this.logout()\n    });\n    if (localStorage.getItem('token')!=null) {\n      this.$http.get('http://localhost:9000/user/me', {\n        params: {},\n        headers: {'Authorization': 'Bearer ' +localStorage.getItem('token')}\n      }).then(resp => (resp.json().then(req => (this.user = req, this.auth = true, localStorage.setItem('user', JSON.stringify(req))))),\n      resp => (resp.json().then(req => (eventBus.$emit('lout',req.error)))))\n    }\n\n  }\n\n};\n</script>\n"]}]}